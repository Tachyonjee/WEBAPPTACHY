<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Register Student</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">

  <h2>Student Registration</h2>
  <form id="studentForm">
    
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Student Name</label>
        <input type="text" name="full_name" class="form-control" required>
      </div>
      <div class="col-md-6 mb-3">
        <label>Date of Birth</label>
        <input type="date" name="dob" class="form-control" required>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Class</label>
        <input type="text" name="class_level" class="form-control" required>
      </div>
      <div class="col-md-4 mb-3">
        <label>Batch Type</label>
        <input type="text" name="batch_type" class="form-control" required>
      </div>
      <div class="col-md-4 mb-3">
        <label>Goal Exam</label>
        <select name="goal_exam" class="form-select" required>
          <option value="JEE">JEE</option>
          <option value="NEET">NEET</option>
          <option value="Foundation">Foundation</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Blood Group</label>
        <input type="text" name="blood_group" class="form-control">
      </div>
    </div>

    <h4 class="mt-4">Parent Details</h4>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Father's Name</label>
        <input type="text" name="father_name" class="form-control" required>
      </div>
      <div class="col-md-6 mb-3">
        <label>Mother's Name</label>
        <input type="text" name="mother_name" class="form-control" required>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Parent Mobile</label>
        <input type="text" name="parent_mobile" class="form-control" required>
      </div>
      <div class="col-md-6 mb-3">
        <label>Student Mobile</label>
        <input type="text" name="student_mobile" class="form-control" required>
      </div>
    </div>

    <div class="mb-3">
      <label>Address</label>
      <textarea name="address" class="form-control"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Register</button>
  </form>

  <div id="result" class="alert mt-3 d-none"></div>

<script>
document.getElementById("studentForm").addEventListener("submit", async function(event) {
    event.preventDefault();
    let formData = Object.fromEntries(new FormData(this).entries());

    const response = await fetch("/api/operator/register-student", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(formData)
    });

    const data = await response.json();
    const resultDiv = document.getElementById("result");

    if (data.success) {
        resultDiv.className = "alert alert-success";
        resultDiv.innerHTML = `
            ✅ Student Registered Successfully!<br>
            <b>Student Username:</b> ${data.student_credentials.username}<br>
            <b>Student Password:</b> ${data.student_credentials.password}<br>
            <b>Parent Username:</b> ${data.parent_credentials.username}<br>
            <b>Parent Password:</b> ${data.parent_credentials.password}
        `;
    } else {
        resultDiv.className = "alert alert-danger";
        resultDiv.innerText = "❌ Error: " + (data.error || data.message);
    }

    resultDiv.classList.remove("d-none");
});
</script>

</body>
</html>
